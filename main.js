!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".cards__like-button").addEventListener("click",(e=>{e.target.classList.toggle("cards__like-button_active"),console.log("liked")})),this._cardElement.querySelector(".cards__delete-button").addEventListener("click",(e=>{e.target.closest(".card").remove()})),this._cardElement.querySelector(".cards__image").addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._setEventListeners(),this._cardElement.querySelector(".cards__image").src=this._link,this._cardElement.querySelector(".cards__image").alt=this._name,this._cardElement.querySelector(".cards__title").textContent=this._name,this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e,t){const s=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=e.validationMessage,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(e,t,s){if(this._hasInvalidInput(e))return t.classList.add(s),void(t.disabled=!0);t.classList.remove(s),t.disabled=!1}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls,this._submitButton,this._inactiveButtonClass)}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(this._inputEls,this._submitButton,this._inactiveButtonClass),this._inputEls.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._button=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscape)}close(){document.removeEventListener("keydown",this._handleEscape),this._popupElement.classList.remove("modal_opened")}_handleEscape=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class n extends s{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form")}_getInputValues(){this._inputList=this._popupForm.querySelectorAll(".modal__input");const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this.close()})),super.setEventListeners()}}const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),a=document.querySelector(".profile__add-button"),l=document.querySelector("#profile-add-card"),c=i.querySelector("#edit-modal-form"),u=document.querySelector("#profile-title-input"),d=document.querySelector("#profile-description-input"),_=l.querySelector("#add-modal-form"),m=(document.querySelector(".cards__list"),"#card-template"),p=new n("#profile-edit-modal",(function(e){E.setUserInfo(e.title,e.description)}));p.setEventListeners();const h=new class extends s{constructor(e){super({popupSelector:e})}open(e,t){this._popupElement.querySelector(".modal__image").src=t,this._popupElement.querySelector(".modal__image").alt=e,this._popupElement.querySelector(".modal__image-text").textContent=e,super.open()}}("#preview-image-modal");h.setEventListeners();const E=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}}(".profile__title",".profile__description"),S=new class{constructor(e){let{items:t,renderer:s,cssSelector:n}=e;this._items=t,this._renderer=s,this._container=document.querySelector(n)}renderItems(){console.log("other"),this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:g,cssSelector:".cards__list"});S.renderItems();const v=new n("#profile-add-card",(function(e){console.log(e),g(e),_.reset()}));function f(e,t){h.open(e,t)}function g(t){const s=function(t){return new e(t,m,f).getView()}(t);S.addItem(s)}v.setEventListeners(),o.addEventListener("click",(()=>{const e=E.getUserInfo();u.value=e.name,d.value=e.job,p.open()})),a.addEventListener("click",(()=>{y.resetValidation(),v.open()})),new t(r,c).enableValidation();const y=new t(r,_);y.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBTSw0R0FFUixDQUNFRixLQUFNLFVBQ05FLEtBQU0scUdBRVIsQ0FDRUYsS0FBTSx3QkFDTkUsS0FBTSxxR0FFUixDQUNFRixLQUFNLGlCQUNORSxLQUFNLG1HQ1dSOEcsU0FBVVUsRUFDVlQsWUFBYSxpQkFFZkgsRUFBWU8sY0FFWixNQUFNTSxFQUFlLElBQUk5QyxFQUN2QixxQkFzQkYsU0FBNkJsRixHQUMzQmtCLFFBQVFDLElBQUluQixHQUNaK0gsRUFBVy9ILEdBQ1hxRyxFQUFZNEIsT0FDZCxJQXJCQSxTQUFTL0gsRUFBaUJHLEVBQU1FLEdBQzlCcUcsRUFBa0JsQyxLQUFLckUsRUFBTUUsRUFDL0IsQ0FNQSxTQUFTd0gsRUFBV0csR0FDbEIsTUFBTUMsRUFMUixTQUFvQkQsR0FDbEIsT0FBTyxJQUFJcEksRUFBS29JLEVBQVU1QixFQUFzQnBHLEdBQWtCb0IsU0FDcEUsQ0FHc0I4RyxDQUFXRixHQUMvQmYsRUFBWVMsUUFBUU8sRUFDdEIsQ0FiQUgsRUFBYWpELG9CQTJCYmUsRUFBa0JqRixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNd0gsRUFBVTdCLEVBQVNVLGNBQ3pCZixFQUFVUixNQUFRMEMsRUFBUWhJLEtBQzFCK0YsRUFBU1QsTUFBUTBDLEVBQVFwQixJQUN6QlYsRUFBYzdCLE1BQU0sSUFHdEJzQixFQUFjbkYsaUJBQWlCLFNBQVMsS0FDdEN5SCxFQUFpQm5FLGtCQUNqQjZELEVBQWF0RCxNQUFNLElBR0ssSUFBSTdDLEVBQWMrRCxFQUFRTSxHQUNsQ2pDLG1CQUVsQixNQUFNcUUsRUFBbUIsSUFBSXpHLEVBQWMrRCxFQUFRUyxHQUNuRGlDLEVBQWlCckUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wVXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTsgLy8gdGl0bGVcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7IC8vIHVybFxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBcIi5jYXJkc19fbGlrZS1idXR0b25cIlxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibGlrZWRcIik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vIFwiLmNhcmRzX19kZWxldGUtYnV0dG9uXCJcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuY2FyZFwiKS5yZW1vdmUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gXCIjcHJvZmlsZS1pbWFnZS1jYXJkXCJcclxuICAgIC8vdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIikuc3JjID1cclxuICAgIC8vdGhpcy5saW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvL3RoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICAvL30pO1xyXG5cclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpO1xyXG5cclxuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgLy8gZ2V0IGNhcmQgdmlld1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgLy8gc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAvLyByZXR1cm4gdGhlIGNhcmRcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCB2YWxpZGF0aW9uTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbHMsIHN1Ym1pdEJ1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcykge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dEVscykpIHtcclxuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKFxyXG4gICAgICAgICAgdGhpcy5faW5wdXRFbHMsXHJcbiAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24sXHJcbiAgICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXHJcbiAgICAgIHRoaXMuX2lucHV0RWxzLFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24sXHJcbiAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3NcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihlbCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY2FwZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIC8vIGlmIHRoZSBldnQudGFyZ2V0LmNsYXNzTGlzdCBjb250YWlucyBlaXRoZXIgYG1vZGFsYCBvciBgbW9kYWxfX2Nsb3NlYFxyXG4gICAgICAvLyB0aGVuIGNsb3NlIG1vZGFsOiB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcFVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgLy8gaGVyZSB5b3UgaW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcbiAgLy8gY2xvc2UoKSB7XHJcbiAgLy8gICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAvLyAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgLy8gfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFt7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH1dO1xyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsfTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWNhcmRcIik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbC1mb3JtXCIpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkQWRkRm9ybSA9IGFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW1vZGFsLWZvcm1cIik7XHJcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcblxyXG5jb25zdCBlZGl0Q2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcclxuKTtcclxuZWRpdENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxucHJldmlld0ltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fdGl0bGVcIiwgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IGl0ZW1TZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgY3NzU2VsZWN0b3I6IFwiLmNhcmRzX19saXN0XCIsXHJcbn0pO1xyXG5pdGVtU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1hZGQtY2FyZFwiLFxyXG4gIGhhbmRsZUNhcmRBZGRTdWJtaXRcclxuKTtcclxuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgcmV0dXJuIG5ldyBDYXJkKGNhcmREYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICBpdGVtU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkU3VibWl0KGRhdGEpIHtcclxuICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICByZW5kZXJDYXJkKGRhdGEsIGNhcmRMaXN0RWwpO1xyXG4gIGNhcmRBZGRGb3JtLnJlc2V0KCk7XHJcbn1cclxuXHJcbi8qIGxpc3RlbmVycyAqL1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VEYXRhLm5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSB1c2VEYXRhLmpvYjtcclxuICBlZGl0Q2FyZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjYXJkQWRkRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wVXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICAvLyBnZXQgYWNjZXNzIHRvIG1vZGFsIGltYWdlIGVsZW1lbnQgJiBtb2RhbCB0aXRsZSBlbGVtZW50XHJcbiAgICAvLyBzZXQgbmFtZSBvZiB0aXRsZVxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIikuYWx0ID0gbmFtZTtcclxuXHJcbiAgICAvLyBzZXQgaW1hZ2UgdXJsIChsaW5rKVxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXRleHRcIikudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbmRlYnVnZ2VyXHJcbiAgfVxyXG5cclxuICAvLyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWVzIG9mIHRoZSBwcm9maWxlIHRleHQgZWxlbWVudHNcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIsIGNzc1NlbGVjdG9yfSkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgLy91c2UgZm9yRWFjaCB0byBcIml0ZXJhdGVcIiBvdmVyIGVhY2ggKGl0ZW0pXHJcbiAgICBjb25zb2xlLmxvZyhcIm90aGVyXCIpO1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAvL3VzZSB0aGlzLl9yZW5kZXJlciB0byByZW5kZXIgZWFjaCAoaXRlbSlcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjb25zb2xlIiwibG9nIiwiY2xvc2VzdCIsInJlbW92ZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbHMiLCJzdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJpbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImVsIiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfYnV0dG9uIiwib3BlbiIsIl9oYW5kbGVFc2NhcGUiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImV2dCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dExpc3QiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJjYXJkQWRkQnV0dG9uIiwiYWRkTW9kYWwiLCJwcm9maWxlRWRpdEZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImNhcmRBZGRGb3JtIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJlZGl0Q2FyZE1vZGFsIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwcmV2aWV3SW1hZ2VNb2RhbCIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJqb2IiLCJnZXRVc2VySW5mbyIsIml0ZW1TZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsImNzc1NlbGVjdG9yIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckNhcmQiLCJhZGRDYXJkTW9kYWwiLCJyZXNldCIsImNhcmREYXRhIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwidXNlRGF0YSIsImFkZEZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9